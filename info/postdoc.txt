I am working on a major update of the [b]ppcomp[/b] utility, mainly to handle HTML5 parsing. I've reached the point where the main functionality is working, and need feedback on what changes may need to be made.

Here is a description of the current functionality, with some suggested changes:

[b]Options:[/b]
[list]
[*]General: Ignore case when comparing
[*]General: Extract and process footnotes separately [color=#FF0000](Remove? See below)[/color]
[*]HTML: add [color=#0000FF][Illustration: ...][/color] tags [color=#FF0000](Keep option, or always do it?)[/color]
[*]HTML: add [color=#0000FF][Sidenote: ...][/color] tags [color=#FF0000](Keep option, or always do it?)[/color]
[*]HTML: use greek transliteration in title attribute [color=#FF0000](Remove)[/color]
[*]HTML: Suppress non-breakable spaces between numbers (U+00A0) [color=#FF0000](Remove)[/color]
[*]HTML: suppress zero width space (U+200B) [color=#FF0000](Remove)[/color]
[*]HTML: Surround bold strings with this string
[*]Text: Suppress [color=#0000FF][Footnote ?:[/color] marks
[*]Text: Suppress [color=#0000FF][Illustration:[/color] marks [color=#FF0000](Remove? Redundant to HTML option)[/color]
[*]Text: Suppress [color=#0000FF][Sidenote:[/color] marks [color=#FF0000](Remove? Redundant to HTML option)[/color]
[*]File from rounds: Silence formatting differences [color=#0000FF](<i>, <b>)[/color]
[*]File from rounds: Remove [color=#0000FF][**proofreaders notes][/color]
[*]File from rounds: Regroup split [color=#0000FF]wo-* *rds[/color]
[*]File from rounds: Type of text cleaning - (b)est effort, (n)one, (p)roofers
[/list]

[b]Other actions for all files:[/b]
[list]
[*]Character conversions - if one file has 1st char & other does not, convert
"’", "'"  # close curly quote to straight
"‘", "'"  # open curly quote to straight
'”', '"'  # close curly quotes to straight
'“', '"'  # open curly quotes to straight
"º", "o"  # ordinal o to letter o
"ª", "a"  # ordinal a to letter a
"–", "-"  # endash to regular dash
"—", "--" # emdash to regular dashes
"½", "-1/2"  # Obsolete? or add more?
"¼", "-1/4"
"¾", "-3/4"
'⁄', '/'   # fraction slash
"′", "'"   # prime
"″", "''"  # double prime
"‴", "'''" # triple prime
"₁", "1" ... # subscript to number
"¹", "1" ... # superscript to number
[/list]

[b]Other actions for text file from rounds:[/b]
[list]
[*]If Silence formatting differences: remove <i> and <b>
	else replace with _, =
[*]Type of text cleaning (overrides other options):
  - (b)est effort [default]: All
  - (n)one: None
  - (p)roofers: Remove page markers, [Blank page] only
[*]Remove block markup
    "/*", "*/",
    "/#", "#/",
    "/P", "P/",
    "/F", "F/",
    "/X", "X/"
[/list]

[b]Other actions for processed text files:[/b]
[list]
[*]Remove PG boilerplate
[*]Remove thought breaks "*     *     *     *     *" (any spacing)
[*]If Silence formatting differences: remove '_', '='
[/list]

[b]Other actions for HTML files:[/b]
[list]
[*]Remove PG boilerplate
[*]Remove page numbers:
    <span class="pagenum"
    <span class="pageno"
    <span class="pgnum"
    <p class="pagenum"
    <p class="pageno"
    <p class="page"
    <div class="pagenum"
    <div class="pageno"
    <div id="Page_"
[*]Replace formatting:
    <i>, <em>, <cite> to '_' or remove (Silence formatting differences)
    <b> to '=' or remove (Silence formatting differences)
[/list]

[b]Proposed changes[/b]
[list]
[*]HTML5 parsing
[*]HTML5 parser generates a warning "DataLossWarning: Coercing non-XML name: xml:lang", this is filtered out
[*]Remove options marked above
[*]Update PG boilerplate removal [color=#0000FF](Latest format only)[/color]
[*]Remove [oe] handling
[*]Improve handling of superscripts and subscripts - Unicode/text markup/html markup
    Superscripts should handle Unicode or ^{} in text, Unicode or <sup> in html (no braces for single char)
	Subscripts should handle Unicode or _{} in text, Unicode or <sub> in html
[*]Extract footnotes: formatting in processed text and HTML files is highly variable, making this very difficult. How desirable is this feature?

Thanks,